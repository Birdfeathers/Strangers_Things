{"ast":null,"code":"import _slicedToArray from\"/Users/rebeccacarr/Desktop/course_work/strangers_things/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{DeletePost,SendMessageAPI}from'./apiCalls';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SendMessage=function SendMessage(_ref){var setOpenM=_ref.setOpenM,post_id=_ref.post_id,token=_ref.token;var currentMessage=\"\";return/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){e.preventDefault();SendMessageAPI(post_id,token,currentMessage);console.log(post_id);setOpenM(false);},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\" Message: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){currentMessage=e.target.value;e.target.value=currentMessage;}})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\"})]});};var Post=function Post(_ref2){var element=_ref2.element,token=_ref2.token,me=_ref2.me,setPosts=_ref2.setPosts,setPostsToDisplay=_ref2.setPostsToDisplay,history=_ref2.history;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openM=_useState2[0],setOpenM=_useState2[1];return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"titleBox\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\" \",element.title]}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Price: \"}),\" \",element.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Will Deliver: \"}),element.willDeliver?\"yes\":\"no\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:me?/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Active:\"}),element.active?\"yes\":\"no\"]}):/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Author: \"}),\" \",element.author.username]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Location: \"}),\" \",element.location]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Description: \"}),element.description]})}),element.isAuthor||me?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"b\",{children:\"Messages: \"})}),element.messages.map(function(message,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"message\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"border\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Author:\"}),\" \",message.fromUser.username,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[message.content,\" \"]})]},index);}),element.isAuthor?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){DeletePost(element._id,token,setPosts,setPostsToDisplay);},children:\"Delete Post \"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){history.push(\"/edit/\"+element._id);},children:\"Edit Post\"})]}):null]}):null,!element.isAuthor&&token&&!me?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setOpenM(true);},children:\"Send Message to Poster\"})}):null,openM?/*#__PURE__*/_jsx(SendMessage,{setOpenM:setOpenM,post_id:element._id,token:token}):null]});};export default Post;","map":{"version":3,"sources":["/Users/rebeccacarr/Desktop/course_work/strangers_things/src/post.js"],"names":["React","useState","DeletePost","SendMessageAPI","SendMessage","setOpenM","post_id","token","currentMessage","e","preventDefault","console","log","target","value","Post","element","me","setPosts","setPostsToDisplay","history","openM","title","price","willDeliver","active","author","username","location","description","isAuthor","messages","map","message","index","fromUser","content","_id","push"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport { DeletePost, SendMessageAPI} from './apiCalls';\n\n\nconst SendMessage = ({ setOpenM, post_id, token}) => {\n    let currentMessage = \"\";\n    return(\n        <form onSubmit = {(e) => {\n            e.preventDefault();\n            SendMessageAPI(post_id, token, currentMessage);\n            console.log(post_id)\n            setOpenM(false);\n        }}>\n            <div>\n                <label> Message: </label>\n                <input type = \"text\" onChange = {(e) => {currentMessage = e.target.value;\n                    e.target.value = currentMessage;}}/>\n            </div>\n            \n            <input type = \"submit\"/>\n            \n        </form>\n    )\n}\n\nconst Post = ({element, token, me, setPosts, setPostsToDisplay, history}) =>{\n    const [openM, setOpenM] = useState(false);\n    return(\n        <div className = \"post\" > \n           <div className = \"titleBox\">\n            <h2> {element.title}</h2>\n            <p> <b>Price: </b> {element.price}</p>\n            <p><b>Will Deliver: </b>{element.willDeliver ? \"yes\" : \"no\"}</p>\n           </div>\n            <div>\n            {me ? <p><b>Active:</b>{element.active ? \"yes\": \"no\"}</p>: <p><b>Author: </b> {element.author.username}</p>}\n            </div>\n            <div><p><b>Location: </b> {element.location}</p></div>\n            <div><p><b>Description: </b>{element.description}</p></div>\n            {element.isAuthor || me ? <div> \n                <p><b>Messages: </b></p>\n                {element.messages.map((message, index) => {return(<div key = {index} className = \"message\">\n                    <div className = \"border\"><b>Author:</b> {message.fromUser.username} </div>\n                    <div>{message.content} </div>\n                    </div>)})}\n                {element.isAuthor ? <div><button onClick = {() =>{\n                    DeletePost(element._id,token, setPosts, setPostsToDisplay);\n                }}>Delete Post </button>\n                <button onClick = {() => {\n                    history.push(\"/edit/\" + element._id)}}>Edit Post</button>\n                </div>: null}\n            </div> : null}\n            {(!element.isAuthor && token && !me) ? <div>\n                <button onClick = {() => {\n                    setOpenM(true);\n                }}>Send Message to Poster</button>\n            </div>:null}\n            {openM ? <SendMessage setOpenM = {setOpenM} post_id = {element._id} token = {token} /> : null}\n        </div>\n    )\n}\n\nexport default Post;\n"]},"metadata":{},"sourceType":"module"}